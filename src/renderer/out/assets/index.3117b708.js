import{d as D,r as p,a as x,c as m,o as L,b as v,e as n,u as c,t as g,F,w as y,v as z,n as A,f as T,g as _,h as k}from"./vendor.d83d9000.js";const M=function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver(e=>{for(const s of e)if(s.type==="childList")for(const i of s.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&t(i)}).observe(document,{childList:!0,subtree:!0});function l(e){const s={};return e.integrity&&(s.integrity=e.integrity),e.referrerpolicy&&(s.referrerPolicy=e.referrerpolicy),e.crossorigin==="use-credentials"?s.credentials="include":e.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function t(e){if(e.ep)return;e.ep=!0;const s=l(e);fetch(e.href,s)}};M();var N="./assets/logo2.eb1bb512.png";const O=n("div",{class:"top"},[n("img",{src:N,class:"logo"})],-1),S={class:"content"},V={class:"input"},$={class:"upload"},P=n("label",{for:"file",class:"center bt1 btn"},"\u62D6\u62FD\u4E0A\u4F20\u5B57\u4F53\u5305",-1),j={class:"fontname"},q={key:0,class:"text1 err"},H={key:1,class:"text1"},I={class:"text2"},K={class:"text3"},U={class:"drag-area"},G=n("div",{class:"drag-area-content"},[n("h2",null,"\u62D6\u62FD\u5230\u8BE5\u533A\u57DF\u5373\u53EF\u4E0A\u4F20"),n("span",null,"*\u4EC5\u652F\u6301ttf\u683C\u5F0F")],-1),J=[G],Q=D({setup(w){const r=p("");let l=p("");const t=x({name:"",size:0,path:""}),e=p(!1),s=p(null),i=m(()=>!!r.value&&!l.value&&t.path),E=m(()=>t.size===0?"--":`${(t.size/1e6).toFixed(3)}MB`),b=u=>{const o=u.target;if(!o.files||!o.files.length)return;console.warn(o.files.length);const{name:a,path:d,size:f}=o.files[0];if(l.value="",/\.ttf$/.test(a.toLowerCase()))l.value="";else return l.value="*\u8BF7\u4E0A\u4F20TTF\u683C\u5F0F\u6587\u4EF6";console.warn(111,o.files),t.name=a,t.path=d,t.size=f,console.warn(t),h()},C=()=>{!i.value||window.fontTiny.compress(r.value)},h=()=>{console.warn("upload",t),window.fontTiny.upload(t.path,t.name)},B=()=>{let u=0;!s.value||(s.value.addEventListener("dragenter",()=>{u++,u===1&&(console.log("dragenter"),e.value||(e.value=!0))}),s.value.addEventListener("dragleave",()=>{u--,u===0&&(console.log("dragleave"),e.value&&(e.value=!1))}),s.value.addEventListener("drop",o=>{var d;u=0,console.log("drop:",o),e.value&&(e.value=!1),o.preventDefault();const a=(d=o.dataTransfer)==null?void 0:d.files;if(console.log("files:",a,o),a&&a.length>0){const f=a[0].path;if(console.log("path:",f,a[0].name),/\.ttf$/.test(a[0].name.toLowerCase()))l.value="";else return l.value="*\u8BF7\u4E0A\u4F20TTF\u683C\u5F0F\u6587\u4EF6";t.name=a[0].name,t.path=f,t.size=a[0].size,h()}}),s.value.addEventListener("dragover",o=>{o.preventDefault()}))};return L(()=>{B()}),(u,o)=>(_(),v(F,null,[n("div",{class:"wrapper",ref_key:"dragger",ref:s,id:"dragger"},[O,n("div",S,[n("div",V,[n("div",$,[P,n("input",{type:"file",id:"file",onChange:b,accept:".ttf"},null,32)]),n("div",j,[c(l)?(_(),v("span",q,g(c(l)),1)):c(t).path?(_(),v(F,{key:2},[n("span",I,g(c(t).name||"--"),1),n("span",K,g(c(E)),1)],64)):(_(),v("span",H,"*\u4EC5\u652F\u6301ttf\u683C\u5F0F"))])]),y(n("textarea",{placeholder:"\u8BF7\u5728\u6B64\u7C98\u8D34\u6240\u9700\u5B57\u7B26",class:"text5 word","onUpdate:modelValue":o[0]||(o[0]=a=>r.value=a)},null,512),[[z,r.value]]),n("div",{class:A(["center bt2 btn",{disabled:!c(i)}]),onClick:C},"\u5BFC\u51FA",2)])],512),y(n("div",U,J,512),[[T,e.value]])],64))}});k(Q).mount("#app");
